{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection Settings",
                "note": "Update your connection settings here",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "URL",
                    "configKey": "googleCloudFunctionUrl",
                    "required": true,
                    "placeholder": "http://www.abcd.com",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|(?!.*\\.ngrok\\.io)^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$",
                    "footerNote": "The Url given under Trigger section when you create Google Cloud Function"
                  },
                  {
                    "type": "checkbox",
                    "label": "Enable it if your function requires authentication",
                    "configKey": "requireAuthentication",
                    "default": true
                  },
                  {
                    "type": "textareaInput",
                    "preRequisiteField": [
                      {
                        "name": "requireAuthentication",
                        "selectedValue": true
                      }
                    ],
                    "label": "Credentials",
                    "labelNote": "GCP Service Account credentials JSON for RudderStack to use in authenticating your Google Cloud Function",
                    "configKey": "credentials",
                    "regex": ".*",
                    "required": true,
                    "footerNote": "The credentials JSON is used by the client library to access the Google Cloud Function API"
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Destination settings",
            "note": "Configure advanced destination-specific settings here",
            "icon": "settings",
            "groups": [
              {
                "title": "Optional Settings",
                "icon": "settings",
                "fields": [
                  {
                    "type": "checkbox",
                    "label": "Enable Batch Input",
                    "configKey": "enableBatchInput",
                    "default": false,
                    "footerNote": "While this is checked, Events are sent in Batch."
                  },
                  {
                    "type": "textInput",
                    "preRequisiteField": {
                      "name": "enableBatchInput",
                      "selectedValue": true
                    },
                    "label": "Max Batch Size",
                    "configKey": "maxBatchSize",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^[1-9]\\d*$",
                    "regexErrorMessage": "Invalid batch size",
                    "placeholder": "e.g: 100",
                    "required": false
                  }
                ]
              }
            ]
          },
          {
            "id": "consentSettings",
            "title": "Consent settings",
            "note": "Configure consent settings for each provider here",
            "icon": "settings",
            "groups": []
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "SDK settings",
      "note": "not visible in the ui",
      "fields": []
    },
    "consentSettingsTemplate": {
      "title": "Consent settings",
      "note": "not visible in the ui",
      "fields": [
        {
          "type": "dynamicCustomForm",
          "configKey": "consentManagement",
          "default": [],
          "rowFields": [
            {
              "type": "singleSelect",
              "label": "Consent management provider",
              "configKey": "provider",
              "options": [
                {
                  "label": "Custom",
                  "value": "custom"
                },
                {
                  "label": "iubenda",
                  "value": "iubenda"
                },
                {
                  "label": "Ketch",
                  "value": "ketch"
                },
                {
                  "label": "OneTrust",
                  "value": "oneTrust"
                }
              ],
              "default": "oneTrust",
              "required": true
            },
            {
              "type": "singleSelect",
              "label": "the required consent logic",
              "configKey": "resolutionStrategy",
              "options": [
                {
                  "label": "AND",
                  "value": "and"
                },
                {
                  "label": "OR",
                  "value": "or"
                }
              ],
              "required": true,
              "variant": "badge",
              "preRequisites": {
                "fields": [
                  {
                    "configKey": "provider",
                    "value": "custom"
                  }
                ]
              }
            },
            {
              "type": "tagInput",
              "label": "Enter consent category IDs",
              "note": "Input your consent category IDs by pressing 'Enter' after each entry. We recommend using IDs instead of names as IDs are unique and less likely to change over time, making them a more reliable choice.",
              "configKey": "consents",
              "tagKey": "consent",
              "placeholder": "e.g: Marketing",
              "default": [
                {
                  "consent": ""
                }
              ]
            }
          ]
        }
      ]
    }
  }
}
