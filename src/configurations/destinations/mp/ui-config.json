{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection settings",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "Project Token",
                    "configKey": "token",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Project Token",
                    "required": true,
                    "placeholder": "c24f56ed817221606de5a5f0befe8b92",
                    "secret": true,
                    "note": [
                      "You can get the Project Token from Project > Project Settings > Access Key.",
                      {
                        "text": "Learn more here",
                        "link": "https://docs.mixpanel.com/docs/tracking/how-tos/api-credentials#project-token"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination.",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Destination settings",
            "note": "Configure advanced destination-specific settings here",
            "icon": "settings",
            "groups": [
              {
                "title": "Mixpanel Fullstack IT",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "API Secret",
                    "configKey": "apiSecret",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{0,100})$",
                    "regexErrorMessage": "Invalid API Secret",
                    "required": false,
                    "placeholder": "f8a911adfbb6546cc43cdfe29e912a90",
                    "secret": true,
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    },
                    "note": [
                      "You can get the API Secret from Project > Project Settings > Access Key.",
                      {
                        "text": "Learn more here",
                        "link": "https://docs.mixpanel.com/docs/tracking/how-tos/api-credentials#api-secret"
                      }
                    ]
                  },
                  {
                    "type": "textInput",
                    "label": "Service Account Username",
                    "configKey": "serviceAccountUserName",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    },
                    "note": [
                      "Refer to ",
                      {
                        "text": "this",
                        "link": "https://docs.mixpanel.com/docs/tracking/how-tos/api-credentials#api-secret"
                      },
                      " Mixpanel guide for managing service account and getting username."
                    ]
                  },
                  {
                    "type": "textInput",
                    "label": "Service Account Secret",
                    "configKey": "serviceAccountSecret",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    },
                    "note": [
                      "Refer to ",
                      {
                        "text": "this",
                        "link": "https://docs.mixpanel.com/docs/tracking/how-tos/api-credentials#api-secret"
                      },
                      " Mixpanel guide for managing service account and getting secret."
                    ]
                  },
                  {
                    "type": "textInput",
                    "label": "Project ID",
                    "configKey": "projectId",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    },
                    "note": [
                      "You can get the Project ID from Project > Project Settings > Project Details.",
                      {
                        "text": "Learn more here",
                        "link": "https://docs.mixpanel.com/docs/admin/organizations-projects/manage-projects#viewing-project-information"
                      }
                    ]
                  },
                  {
                    "type": "singleSelect",
                    "label": "Data Residency",
                    "configKey": "dataResidency",
                    "options": [
                      {
                        "label": "US",
                        "value": "us"
                      },
                      {
                        "label": "EU",
                        "value": "eu"
                      }
                    ],
                    "default": "us",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    }
                  },
                  {
                    "type": "singleSelect",
                    "label": "Identity Merge",
                    "configKey": "identityMergeApi",
                    "note": [
                      "Select Identity Merge API.",
                      {
                        "text": "Learn more",
                        "link": "https://help.mixpanel.com/hc/en-us/articles/14383975110292"
                      },
                      " about Simplified vs Original ID Merge API."
                    ],
                    "options": [
                      {
                        "label": "Simplified ID Merge",
                        "value": "simplified"
                      },
                      {
                        "label": "Original ID Merge",
                        "value": "original"
                      }
                    ],
                    "default": "original",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    }
                  },
                  {
                    "type": "checkbox",
                    "label": "Strict Mode",
                    "configKey": "strictMode",
                    "default": false,
                    "note": "If enabled, Mixpanel will validate the request and return errors per event that failed",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "title": "Event Map Setting",
                "fields": [
                  {
                    "type": "checkbox",
                    "configKey": "useNewMapping",
                    "label": "Use New Mapping",
                    "default": false,
                    "note": "It is recommended to set this to on as we are deprecating support for the old mapping soon.",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "title": "Group Key Settings",
                "fields": [
                  {
                    "type": "tagInput",
                    "configKey": "groupKeySettings",
                    "tagKey": "groupKey",
                    "label": "Group Keys",
                    "placeholder": "e.g: company",
                    "default": [
                      {
                        "groupKey": ""
                      }
                    ]
                  }
                ]
              },
              {
                "title": "User Deletion Setting",
                "fields": [
                  {
                    "type": "singleSelect",
                    "label": "User Deletion",
                    "configKey": "userDeletionApi",
                    "note": [
                      "Select Mixpanel User Deletion API.",
                      {
                        "text": "Learn more",
                        "link": "https://www.rudderstack.com/docs/destinations/streaming-destinations/mixpanel/#deleting-a-user"
                      },
                      " about difference between the two APIs"
                    ],
                    "options": [
                      {
                        "label": "Delete Profile",
                        "value": "engage"
                      },
                      {
                        "label": "Delete Profile and Associated Events",
                        "value": "task"
                      }
                    ],
                    "default": "engage",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "connectionModes.cloud",
                          "value": true
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          {
            "title": "Other settings",
            "note": "Configure advanced RudderStack features here",
            "icon": "otherSettings",
            "groups": [
              {
                "title": "Client-side event filtering",
                "note": "Decide what events are allowed (allowlisting) and blocked (denylisting)",
                "preRequisites": {
                  "fields": [
                    {
                      "configKey": "connectionModes.webDevice",
                      "value": true
                    },
                    {
                      "configKey": "connectionModes.mobileDevice",
                      "value": true
                    }
                  ],
                  "condition": "or"
                },
                "fields": [
                  {
                    "type": "singleSelect",
                    "label": "Choose if you want to turn on event filtering: ",
                    "configKey": "eventFilteringOption",
                    "note": "You must select either allowlist or denylist to enable events filtering",
                    "options": [
                      {
                        "label": "Disabled",
                        "configKey": "disable"
                      },
                      {
                        "label": "Filter via allowlist",
                        "configKey": "whitelistedEvents"
                      },
                      {
                        "label": "Filter via denylist",
                        "configKey": "blacklistedEvents"
                      }
                    ],
                    "default": "disable"
                  },
                  {
                    "type": "tagInput",
                    "label": "Allowlisted events",
                    "note": "Input the events you want to allowlist.\nInput separate events by pressing ‘Enter’.",
                    "configKey": "whitelistedEvents",
                    "tagKey": "eventName",
                    "placeholder": "e.g: Anonymous page visit",
                    "default": [
                      {
                        "eventName": ""
                      }
                    ],
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "eventFilteringOption",
                          "value": "whitelistedEvents"
                        }
                      ]
                    }
                  },
                  {
                    "type": "tagInput",
                    "label": "Denylisted events",
                    "note": "Input the events you want to denylist.\nInput separate events by pressing ‘Enter’.",
                    "configKey": "blacklistedEvents",
                    "tagKey": "eventName",
                    "placeholder": "e.g: Anonymous page visit",
                    "default": [
                      {
                        "eventName": ""
                      }
                    ],
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "eventFilteringOption",
                          "value": "blacklistedEvents"
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "title": "OneTrust cookie consent settings",
                "note": [
                  "Enter your OneTrust consent category IDs or names if you have them configured. We recommend providing category IDs over names, as the category names only work in the device connection mode. So, you can seamlessly switch between the connection modes.",
                  {
                    "text": "Learn more",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/rudderstack-javascript-sdk/onetrust-consent-manager/"
                  },
                  " about RudderStack’s OneTrust Consent Manager feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Consent categories",
                    "note": "Input your OneTrust consent category IDs or names by pressing ‘Enter’ after each entry. You should prefer category IDs over names. Refer to this section's note.",
                    "configKey": "oneTrustCookieCategories",
                    "tagKey": "oneTrustCookieCategory",
                    "placeholder": "e.g: C0001",
                    "default": [
                      {
                        "oneTrustCookieCategory": ""
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "SDK settings",
      "fields": [
        {
          "type": "checkbox",
          "label": "Use Mixpanel People",
          "configKey": "people",
          "default": false,
          "note": "This will send all of your identify calls to Mixpanel's People feature."
        },
        {
          "type": "checkbox",
          "label": "Automatically set all Traits as Super Properties and People Properties",
          "configKey": "setAllTraitsByDefault",
          "default": false,
          "note": "While this is checked, our integration automatically sets all traits on identify calls as super properties and people properties if Mixpanel People is checked as well."
        },
        {
          "type": "checkbox",
          "label": "Ignore \"Do Not Track\"",
          "configKey": "ignoreDnt",
          "default": false,
          "note": "If enabled, Mixpanel will ignore \"Do Not Track\" setting of browser"
        },
        {
          "type": "checkbox",
          "label": "Track All Pages to Mixpanel with a Consolidated Event Name",
          "configKey": "consolidatedPageCalls",
          "default": true,
          "note": "This will track Loaded a Page events to Mixpanel for all page method calls. We enable this by default as it's how Mixpanel suggests sending these calls."
        },
        {
          "type": "checkbox",
          "label": "Track Categorized Pages to Mixpanel",
          "configKey": "trackCategorizedPages",
          "default": false,
          "note": "This will track events to Mixpanel for page method calls that have a category associated with them. For example page('Docs', 'Index') would translate to Viewed Docs Index Page."
        },
        {
          "type": "checkbox",
          "label": "Track Named Pages to Mixpanel",
          "configKey": "trackNamedPages",
          "default": false,
          "note": "This will track events to Mixpanel for page method calls that have a name associated with them. For example page('Signup') would translate to Viewed Signup Page."
        },
        {
          "type": "textInput",
          "label": "Source Name",
          "configKey": "sourceName",
          "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{0,100})$",
          "regexErrorMessage": "Invalid Source Name",
          "required": false,
          "placeholder": "e.g: Rudder-JS",
          "note": "This value, if it's not blank, will be sent as rudderstack_source_name to Mixpanel for every event/page/screen call."
        },
        {
          "type": "checkbox",
          "label": "Cross Subdomain Cookie",
          "configKey": "crossSubdomainCookie",
          "default": false,
          "note": "This will allow the Mixpanel cookie to persist between different pages of your application."
        },
        {
          "type": "singleSelect",
          "label": "Persistence Type",
          "configKey": "persistenceType",
          "options": [
            {
              "label": "None",
              "value": "none"
            },
            {
              "label": "Cookie",
              "value": "cookie"
            },
            {
              "label": "Local Storage",
              "value": "localStorage"
            }
          ],
          "default": "cookie",
          "note": "Choose the persistence type for Mixpanel cookie. If 'Local Storage' is selected, then any existing Mixpanel cookie value with the same persistence name will be transferred to 'Local Storage' and deleted."
        },
        {
          "type": "textInput",
          "label": "Persistence Name",
          "configKey": "persistenceName",
          "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{0,100})$",
          "note": "Enter a persistence name for the Mixpanel cookie."
        },
        {
          "type": "checkbox",
          "label": "Secure Cookie",
          "configKey": "secureCookie",
          "default": false,
          "note": "This will mark the Mixpanel cookie as secure, meaning it will only be transmitted over https"
        },
        {
          "type": "tagInput",
          "configKey": "superProperties",
          "label": "Property to send as super Properties",
          "tagKey": "property",
          "regex": "^(.{0,100})$",
          "regexErrorMessage": "Invalid Property Name",
          "placeholder": "e.g: residence"
        },
        {
          "type": "tagInput",
          "configKey": "peopleProperties",
          "label": "Traits to set as People Properties",
          "tagKey": "property",
          "regex": "^(.{0,100})$",
          "regexErrorMessage": "Invalid Property Name",
          "placeholder": "e.g: address"
        },
        {
          "type": "tagInput",
          "configKey": "eventIncrements",
          "label": "Events to increment in People",
          "tagKey": "property",
          "regex": "^(.{0,100})$",
          "regexErrorMessage": "Invalid Property Name",
          "placeholder": "e.g: Added-to-cart"
        },
        {
          "type": "tagInput",
          "configKey": "propIncrements",
          "label": "Properties to increment in People",
          "tagKey": "property",
          "regex": "^(.{0,100})$",
          "regexErrorMessage": "Invalid Property Name",
          "placeholder": "e.g: Cart-Value"
        }
      ]
    }
  }
}