{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection Settings",
                "note": "Update your connection settings here",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "Emersys Username",
                    "configKey": "emersysUsername",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "secret": true,
                    "regexErrorMessage": "Invalid Username",
                    "placeholder": "e.g. dummy_username"
                  },
                  {
                    "type": "textInput",
                    "label": "Emersys User Secret",
                    "configKey": "emersysUserSecret",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "secret": true,
                    "regexErrorMessage": "Invalid User Secret",
                    "placeholder": "e.g. dummy_userSecret"
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding.",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Destination settings",
            "note": "Configure advanced destination-specific settings here",
            "icon": "settings",
            "groups": [
              {
                "title": "Custom Identifier Field Settings",
                "fields": [
                  {
                    "type": "dynamicDataSelect",
                    "configKey": "emersysCustomIdentifier",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{0,100})$",
                    "regexErrorMessage": "Invalid Custom Identifier",
                    "label": "Choose Custom Identifier From Your Emersys Properties List",
                    "placeholder": "e.g 1234567",
                    "apiName": "customIdentifier"
                  }
                ]
              },
              {
                "title": "Optional configuration settings",
                "fields": [
                  {
                    "type": "checkbox",
                    "label": "Discard empty contact properties",
                    "configKey": "discardEmptyProperties",
                    "default": true,
                    "note": "Disable it if you are not sending null or empty values for contact properties"
                  }
                ]
              }
            ]
          },
          {
            "title": "Other settings",
            "note": "Configure advanced RudderStack features here",
            "icon": "otherSettings",
            "groups": [
              {
                "title": "OneTrust consent settings",
                "note": [
                  "Enter your OneTrust consent category IDs if you have them configured. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/consent-manager/onetrust/"
                  },
                  "about RudderStack's OneTrust Consent Management feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Consent categories",
                    "note": "Input your OneTrust category IDs by pressing 'Enter' after each entry.",
                    "configKey": "oneTrustCookieCategories",
                    "tagKey": "oneTrustCookieCategory",
                    "placeholder": "e.g: C0001",
                    "default": [
                      {
                        "oneTrustCookieCategory": ""
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "title": "Custom Property mapping",
        "note": "Map RudderStack Events Properties to Emersys Contact Properties",
        "hideEditIcon": true,
        "sections": [
          {
            "groups": [
              {
                "title": "RudderStack Event name to Emersys Ads Conversion Rule Id mappings",
                "fields": [
                  {
                    "type": "redirect",
                    "redirectGroupKey": "fieldMapping",
                    "label": "Custom Property Mapping",
                    "note": "Map RudderStack events properties to Emersys custom fields"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "title": "Event mapping",
        "note": "Map RudderStack Events to Emersys External Events",
        "hideEditIcon": true,
        "sections": [
          {
            "groups": [
              {
                "title": "RudderStack Event name to Emersys Ads Conversion Rule Id mappings",
                "fields": [
                  {
                    "type": "redirect",
                    "redirectGroupKey": "eventsMapping",
                    "label": "External Event Mapping",
                    "note": "Map RudderStack events to Emersys external events"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "Web SDK settings",
      "note": "not visible in the ui",
      "fields": []
    },
    "redirectGroups": {
      "fieldMapping": {
        "fields": [
          {
            "type": "dynamicCustomForm",
            "label": "Map Rudderstack event properties to Emersys contact properties",
            "configKey": "fieldMapping",
            "rowFields": [
              {
                "type": "mappingRow",
                "columns": [
                  {
                    "type": "textInput",
                    "configKey": "from",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Event Property",
                    "label": "RudderStack Event Property",
                    "placeholder": "e.g city"
                  },
                  {
                    "type": "dynamicDataSelect",
                    "configKey": "to",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Custom Property",
                    "label": "Emersys custom property name",
                    "placeholder": "e.g companyCity",
                    "apiName": "customProperty"
                  }
                ]
              }
            ]
          }
        ]
      },
      "eventsMapping": {
        "fields": [
          {
            "type": "dynamicCustomForm",
            "label": "Map Rudderstack Events to Emersys external events",
            "configKey": "eventMapping",
            "rowFields": [
              {
                "type": "mappingRow",
                "columns": [
                  {
                    "type": "textInput",
                    "configKey": "from",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Event Name",
                    "label": "RudderStack Event Name",
                    "placeholder": "e.g product added"
                  },
                  {
                    "type": "dynamicDataSelect",
                    "configKey": "to",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid external event",
                    "label": "Emersys external event name",
                    "placeholder": "e.g addToCart",
                    "apiName": "externalEvent"
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
