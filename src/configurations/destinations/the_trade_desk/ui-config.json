{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection settings",
                "note": "Update your connection settings here",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "Advertiser ID",
                    "note": "Enter your Advertiser Id from advertiser preferences page in The Trade Desk platform UI.",
                    "configKey": "advertiserId",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Advertiser ID",
                    "placeholder": "e.g: jxXXXph"
                  },
                  {
                    "type": "textInput",
                    "label": "Advertiser Secret Key",
                    "note": "Enter your advertiser secret key from the Advertiser Preferences page in The Trade Desk platform UI. If you can't find your secret key, please contact your Technical Account Manager.",
                    "configKey": "advertiserSecretKey",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Advertiser Secret Key",
                    "placeholder": "e.g: u8a7f3k9p2nXXXXX4q5r2m8d7z1o9",
                    "secret": true
                  },
                  {
                    "type": "textInput",
                    "label": "Tracking Tag ID",
                    "note": "Tracking tag ID from advertiser preferences page in the TTD platform UI. If you can't find your tracking tag ID, contact your Technical Account Manager.",
                    "configKey": "trackerId",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Tracking Tag ID",
                    "placeholder": "e.g: hcXXXke"
                  },
                  {
                    "type": "singleSelect",
                    "label": "Data Server",
                    "configKey": "dataServer",
                    "note": "For reduce latency, select the data server closes to the location of the users targeted by your campaign.",
                    "options": [
                      {
                        "label": "APAC",
                        "value": "apac"
                      },
                      {
                        "label": "Tokyo",
                        "value": "tokyo"
                      },
                      {
                        "label": "US East Coast",
                        "value": "usEastCoast"
                      },
                      {
                        "label": "US West Coast",
                        "value": "usWestCoast"
                      },
                      {
                        "label": "UK/EU",
                        "value": "ukEu"
                      },
                      {
                        "label": "China",
                        "value": "china"
                      }
                    ],
                    "default": "usEastCoast"
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Destination settings",
            "note": "Configure destination-specific settings here",
            "icon": "settings",
            "groups": [
              {
                "title": "Trade Desk IT",
                "note": "Configure a few advanced Trade Desk settings here",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "TTL (in days)",
                    "note": "Enter the Time-to-Live (TTL) for the user data in segment, indicating the duration a user remains active in the segment. The default TTL is set to 30 days(most commonly used). The maximum allowable TTL is 180 days.",
                    "configKey": "ttlInDays",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^([0-9]|[1-9][0-9]|1[0-7][0-9]|180)$",
                    "regexErrorMessage": "Invalid TTL",
                    "placeholder": "e.g: 30",
                    "default": "30"
                  }
                ]
              }
            ]
          },
          {
            "id": "consentSettings",
            "title": "Consent settings",
            "note": "Configure consent settings for each provider here",
            "icon": "settings",
            "groups": [
              {
                "title": "OneTrust consent settings",
                "note": [
                  "Enter your OneTrust consent category IDs if you have them configured. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/consent-manager/onetrust/"
                  },
                  "about RudderStack's OneTrust Consent Management feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Consent category IDs",
                    "note": "Input your OneTrust category IDs by pressing 'Enter' after each entry.",
                    "configKey": "oneTrustCookieCategories",
                    "tagKey": "oneTrustCookieCategory",
                    "placeholder": "e.g: C0001",
                    "default": [
                      {
                        "oneTrustCookieCategory": ""
                      }
                    ]
                  }
                ],
                "preRequisites": {
                  "featureFlags": [
                    {
                      "configKey": "AMP_enable-gcm",
                      "value": false
                    },
                    {
                      "configKey": "AMP_enable-gcm"
                    }
                  ],
                  "featureFlagsCondition": "or"
                }
              },
              {
                "title": "Ketch consent settings",
                "note": [
                  "Enter your Ketch consent purpose IDs if you have them configured.",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/consent-manager/ketch/"
                  },
                  "about RudderStack's Ketch Consent Management feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Consent purpose IDs",
                    "note": "Input your Ketch consent purpose IDs by pressing 'Enter' after each entry.",
                    "configKey": "ketchConsentPurposes",
                    "tagKey": "purpose",
                    "placeholder": "e.g: marketing",
                    "default": [
                      {
                        "purpose": ""
                      }
                    ]
                  }
                ],
                "preRequisites": {
                  "featureFlags": [
                    {
                      "configKey": "AMP_enable-gcm",
                      "value": false
                    },
                    {
                      "configKey": "AMP_enable-gcm"
                    }
                  ],
                  "featureFlagsCondition": "or"
                }
              }
            ]
          },
          {
            "title": "Other settings",
            "note": "Configure advanced RudderStack features here",
            "icon": "otherSettings",
            "groups": [
              {
                "title": "OneTrust cookie consent settings",
                "note": [
                  "Enter your OneTrust category names if you have them configured. ",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/rudderstack-javascript-sdk/onetrust-consent-manager/"
                  },
                  "about RudderStack's OneTrust Consent Manager feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Cookie category name",
                    "note": "Input your OneTrust category names by pressing 'Enter' after each entry",
                    "configKey": "oneTrustCookieCategories",
                    "tagKey": "oneTrustCookieCategory",
                    "placeholder": "e.g: Credit card visit",
                    "default": [
                      {
                        "oneTrustCookieCategory": ""
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "title": "Event mapping",
        "note": "Map RudderStack to Trade Desk events",
        "hideEditIcon": true,
        "sections": [
          {
            "groups": [
              {
                "title": "RudderStack to Trade Desk event mappings",
                "fields": [
                  {
                    "type": "redirect",
                    "redirectGroupKey": "eventAndPropertiesMapping",
                    "label": "Event and property mappings",
                    "note": "Map RudderStack events/properties to Trade Desk events/properties"
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "SDK settings",
      "note": "not visible in the ui",
      "fields": []
    },
    "redirectGroups": {
      "eventAndPropertiesMapping": {
        "tabs": [
          {
            "name": "Event",
            "fields": [
              {
                "type": "mapping",
                "label": "Map your RudderStack Events to Trade Desk Events",
                "note": "Enter the input event name which you want to map with a Trade Desk Event Name",
                "configKey": "eventsMapping",
                "default": [],
                "columns": [
                  {
                    "type": "textInput",
                    "key": "from",
                    "label": "RudderStack Event",
                    "placeholder": "e.g: Product Searched"
                  },
                  {
                    "type": "singleSelect",
                    "key": "to",
                    "label": "Trade Desk Event",
                    "options": [
                      {
                        "name": "searchitem",
                        "value": "searchitem"
                      },
                      {
                        "name": "searchcategory",
                        "value": "searchcategory"
                      },
                      {
                        "name": "login",
                        "value": "login"
                      },
                      {
                        "name": "messagebusiness",
                        "value": "messagebusiness"
                      },
                      {
                        "name": "direction",
                        "value": "direction"
                      },
                      {
                        "name": "sitevisit",
                        "value": "sitevisit"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "Custom properties",
            "fields": [
              {
                "type": "mapping",
                "label": "Map custom properties",
                "configKey": "customProperties",
                "default": [],
                "columns": [
                  {
                    "type": "textInput",
                    "key": "rudderProperty",
                    "label": "RudderStack property path",
                    "placeholder": "e.g properties.key1"
                  },
                  {
                    "type": "singleSelect",
                    "key": "tradeDeskProperty",
                    "label": "Trade Desk custom property",
                    "options": [
                      {
                        "label": "td1",
                        "value": "td1"
                      },
                      {
                        "label": "td2",
                        "value": "td2"
                      },
                      {
                        "label": "td3",
                        "value": "td3"
                      },
                      {
                        "label": "td4",
                        "value": "td4"
                      },
                      {
                        "label": "td5",
                        "value": "td5"
                      },
                      {
                        "label": "td6",
                        "value": "td6"
                      },
                      {
                        "label": "td7",
                        "value": "td7"
                      },
                      {
                        "label": "td8",
                        "value": "td8"
                      },
                      {
                        "label": "td9",
                        "value": "td9"
                      },
                      {
                        "label": "td10",
                        "value": "td10"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    }
  }
}
