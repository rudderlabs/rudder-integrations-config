{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "icon": "settings",
                "note": "Update your connection settings here",
                "title": "Connection Settings",
                "fields": [
                  {
                    "type": "checkbox",
                    "label": "Select account using access token",
                    "configKey": "fetchCustomerIdUsingOAuth",
                    "default": false
                  },
                  {
                    "type": "nestedSelect",
                    "label": "Select Account -> SubAccount -> Login CustomerId",
                    "apiName": "getConfigData",
                    "configKey": "configData",
                    "placeholder": "Select config details",
                    "preRequisites": {
                      "fields": [
                        {
                          "exists": true,
                          "configKey": "rudderAccountId"
                        },
                        {
                          "configKey": "fetchCustomerIdUsingOAuth",
                          "value": true
                        }
                      ]
                    },
                    "apiDependencies": ["rudderAccountId"]
                  },
                  {
                    "type": "textInput",
                    "label": "Customer ID",
                    "note": "Enter the Customer ID",
                    "configKey": "customerId",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Customer Id",
                    "placeholder": "e.g: 9693XX9833",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "fetchCustomerIdUsingOAuth",
                          "value": false
                        }
                      ]
                    }
                  },
                  {
                    "type": "checkbox",
                    "label": "Sub Account",
                    "configKey": "subAccount",
                    "default": false,
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "fetchCustomerIdUsingOAuth",
                          "value": false
                        }
                      ]
                    }
                  },
                  {
                    "type": "textInput",
                    "label": "Login Customer ID",
                    "note": "Enter the Login Customer ID",
                    "configKey": "loginCustomerId",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Login Customer Id",
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "subAccount",
                          "value": true
                        },
                        {
                          "configKey": "fetchCustomerIdUsingOAuth",
                          "value": false
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Event settings",
            "note": "Configure your event level settings",
            "groups": [
              {
                "title": "Conversion settings",
                "note": "Enter your list of Conversions",
                "fields": [
                  {
                    "note": "Add your conversions names",
                    "type": "dynamicDataSelect",
                    "apiName": "getConversionId",
                    "label": "List of Conversion",
                    "tagKey": "conversions",
                    "default": [
                      {
                        "conversions": ""
                      }
                    ],
                    "configKey": "listOfConversions",
                    "placeholder": "e.g: Credit card visit"
                  },
                  {
                    "type": "checkbox",
                    "label": "Hashing required",
                    "configKey": "requireHash",
                    "default": true,
                    "footerNote": "If this option is set to on we will encrypt mail, phoneNumber, firstName, lastName and streetAddress"
                  }
                ]
              }
            ]
          },
          {
            "id": "consentSettings",
            "title": "Consent settings",
            "note": "Configure consent settings for each provider here",
            "icon": "settings",
            "groups": []
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "Web SDK settings",
      "note": "not visible in the ui",
      "fields": []
    },
    "consentSettingsTemplate": {
      "title": "Consent settings",
      "note": "not visible in the ui",
      "fields": [
        {
          "type": "tagInput",
          "label": "OneTrust consent category IDs",
          "note": "Input your OneTrust category IDs by pressing 'Enter' after each entry. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
          "configKey": "oneTrustCookieCategories",
          "tagKey": "oneTrustCookieCategory",
          "placeholder": "e.g: C0001",
          "default": [
            {
              "oneTrustCookieCategory": ""
            }
          ],
          "preRequisites": {
            "featureFlags": [
              {
                "configKey": "AMP_enable-gcm",
                "value": false
              },
              {
                "configKey": "AMP_enable-gcm"
              }
            ],
            "featureFlagsCondition": "or"
          }
        },
        {
          "type": "tagInput",
          "label": "Ketch consent purpose IDs",
          "note": "Input your Ketch consent purpose IDs by pressing 'Enter' after each entry.",
          "configKey": "ketchConsentPurposes",
          "tagKey": "purpose",
          "placeholder": "e.g: marketing",
          "default": [
            {
              "purpose": ""
            }
          ],
          "preRequisites": {
            "featureFlags": [
              {
                "configKey": "AMP_enable-gcm",
                "value": false
              },
              {
                "configKey": "AMP_enable-gcm"
              }
            ],
            "featureFlagsCondition": "or"
          }
        },
        {
          "type": "dynamicCustomForm",
          "configKey": "consentManagement",
          "default": [],
          "rowFields": [
            {
              "type": "singleSelect",
              "label": "Consent management provider",
              "configKey": "provider",
              "options": [
                {
                  "label": "Custom",
                  "value": "custom"
                },
                {
                  "label": "Ketch",
                  "value": "ketch"
                },
                {
                  "label": "OneTrust",
                  "value": "oneTrust"
                }
              ],
              "default": "oneTrust",
              "required": true
            },
            {
              "type": "singleSelect",
              "label": "the required consent logic",
              "configKey": "resolutionStrategy",
              "options": [
                {
                  "label": "AND",
                  "value": "and"
                },
                {
                  "label": "OR",
                  "value": "or"
                }
              ],
              "required": true,
              "variant": "badge",
              "preRequisites": {
                "fields": [
                  {
                    "configKey": "provider",
                    "value": "custom"
                  }
                ]
              }
            },
            {
              "type": "tagInput",
              "label": "Enter consent category ID’s",
              "note": "Input your consent category IDs by pressing ‘Enter’ after each entry. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
              "configKey": "consents",
              "tagKey": "consent",
              "placeholder": "e.g: Marketing",
              "default": [
                {
                  "consent": ""
                }
              ]
            }
          ],
          "preRequisites": {
            "featureFlags": [
              {
                "configKey": "AMP_enable-gcm",
                "value": true
              }
            ]
          }
        }
      ]
    }
  }
}
