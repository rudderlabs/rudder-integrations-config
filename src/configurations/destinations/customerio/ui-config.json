{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection settings",
                "note": "Update your connection settings here",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "API Key",
                    "configKey": "apiKey",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Api Key",
                    "placeholder": "e.g: ABCDEFG",
                    "note": "Enter your Customer.io API Key"
                  },
                  {
                    "type": "textInput",
                    "label": "Site ID",
                    "configKey": "siteID",
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{1,100})$",
                    "regexErrorMessage": "Invalid Site ID",
                    "placeholder": "e.g: ABCDEFG",
                    "note": "Enter your Customer.io Site ID"
                  },
                  {
                    "type": "singleSelect",
                    "label": "Data Center",
                    "configKey": "datacenter",
                    "note": "Select your Customer.io Data Center",
                    "options": [
                      {
                        "label": "US",
                        "value": "US"
                      },
                      {
                        "label": "EU",
                        "value": "EU"
                      }
                    ],
                    "default": "US"
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "title": "Destination settings",
            "note": "Configure advanced destination-specific settings here",
            "icon": "settings",
            "groups": [
              {
                "title": "Destination Specific Setting",
                "note": "Configure a few Customerio settings here",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "Event Sent After Setting Device Token",
                    "configKey": "deviceTokenEventName",
                    "note": [
                      "This event should be fired just after setting device token to enable sending device tokens to Customer.io immediately."
                    ],
                    "regex": "(^\\{\\{.*\\|\\|(.*)\\}\\}$)|(^env[.].+)|^(.{0,100})$",
                    "regexErrorMessage": "Invalid Event Name",
                    "placeholder": "e.g: device_token_registered"
                  }
                ]
              }
            ]
          },
          {
            "id": "consentSettings",
            "title": "Consent settings",
            "note": "Configure consent settings for each provider here",
            "icon": "settings",
            "groups": [
              {
                "title": "OneTrust consent settings",
                "note": [
                  "Enter your OneTrust consent category IDs if you have them configured. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/consent-manager/onetrust/"
                  },
                  "about RudderStack's OneTrust Consent Management feature."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Consent categories",
                    "note": "Input your OneTrust category IDs by pressing 'Enter' after each entry.",
                    "configKey": "oneTrustCookieCategories",
                    "tagKey": "oneTrustCookieCategory",
                    "placeholder": "e.g: C0001",
                    "default": [
                      {
                        "oneTrustCookieCategory": ""
                      }
                    ]
                  }
                ],
                "preRequisites": {
                  "featureFlags": [
                    {
                      "configKey": "AMP_enable-gcm",
                      "value": false
                    },
                    {
                      "configKey": "AMP_enable-gcm"
                    }
                  ],
                  "featureFlagsCondition": "or"
                }
              },
              {
                "title": "Ketch consent purpose settings",
                "note": [
                  "Enter your Ketch purpose Id if you have them configured. ",
                  {
                    "text": "Learn more ",
                    "link": "https://www.rudderstack.com/docs/sources/event-streams/sdks/consent-manager/ketch/"
                  },
                  "about RudderStack and Ketch Consent Manager integration."
                ],
                "fields": [
                  {
                    "type": "tagInput",
                    "label": "Purpose ID",
                    "note": "Input your Ketch purpose Id by pressing 'Enter' after each entry",
                    "configKey": "ketchConsentPurposes",
                    "tagKey": "purpose",
                    "placeholder": "e.g: Marketing",
                    "default": [
                      {
                        "purpose": ""
                      }
                    ]
                  }
                ],
                "preRequisites": {
                  "featureFlags": [
                    {
                      "configKey": "AMP_enable-gcm",
                      "value": false
                    },
                    {
                      "configKey": "AMP_enable-gcm"
                    }
                  ],
                  "featureFlagsCondition": "or"
                }
              }
            ]
          },
          {
            "title": "Other settings",
            "note": "Configure advanced RudderStack features here",
            "icon": "otherSettings",
            "groups": [
              {
                "title": "Client-side event filtering",
                "note": "Decide what events are allowed (allowlisting) and blocked (denylisting)",
                "preRequisites": {
                  "fields": [
                    {
                      "configKey": "connectionMode.web",
                      "value": "device"
                    }
                  ]
                },
                "fields": [
                  {
                    "type": "singleSelect",
                    "label": "Choose if you want to turn on events filtering:",
                    "configKey": "eventFilteringOption",
                    "note": "You must select either allowlist or denylist to enable events filtering",
                    "options": [
                      {
                        "label": "Disabled",
                        "value": "disable"
                      },
                      {
                        "label": "Filter via allowlist",
                        "value": "whitelistedEvents"
                      },
                      {
                        "label": "Filter via denylist",
                        "value": "blacklistedEvents"
                      }
                    ],
                    "default": "disable"
                  },
                  {
                    "type": "tagInput",
                    "label": "Allowlisted events",
                    "note": "Input separate events by pressing ‘Enter’.\nInput the events you want to allowlist.",
                    "configKey": "whitelistedEvents",
                    "tagKey": "eventName",
                    "placeholder": "e.g: Anonymous page visit",
                    "default": [
                      {
                        "eventName": ""
                      }
                    ],
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "eventFilteringOption",
                          "value": "whitelistedEvents"
                        }
                      ]
                    }
                  },
                  {
                    "type": "tagInput",
                    "label": "Denylisted events",
                    "note": "Input separate events by pressing ‘Enter’.\nInput the events you want to denylist. ",
                    "configKey": "blacklistedEvents",
                    "tagKey": "eventName",
                    "placeholder": "e.g: Anonymous page visit",
                    "default": [
                      {
                        "eventName": ""
                      }
                    ],
                    "preRequisites": {
                      "fields": [
                        {
                          "configKey": "eventFilteringOption",
                          "value": "blacklistedEvents"
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "sdkTemplate": {
      "title": "SDK settings",
      "note": "not visible in the ui",
      "fields": [
        {
          "type": "checkbox",
          "label": "Send Page Name in SDK mode",
          "note": "Turn it OFF if you don't want to send the page name when connected in device mode. If OFF page name will automatically be captured by Customer.io.",
          "configKey": "sendPageNameInSDK",
          "default": true
        },
        {
          "type": "checkbox",
          "label": "Enable in-app message support",
          "note": "Turn it ON if you want to send in-app messages to your website.",
          "configKey": "dataUseInApp",
          "default": false
        }
      ]
    },
    "consentSettingsTemplate": {
      "title": "Consent settings",
      "note": "not visible in the ui",
      "fields": [
        {
          "type": "dynamicCustomForm",
          "configKey": "consentManagement",
          "default": [],
          "rowFields": [
            {
              "type": "singleSelect",
              "label": "Consent management provider",
              "configKey": "provider",
              "options": [
                {
                  "label": "Custom",
                  "value": "custom"
                },
                {
                  "label": "Ketch",
                  "value": "ketch"
                },
                {
                  "label": "OneTrust",
                  "value": "oneTrust"
                }
              ],
              "default": "oneTrust",
              "required": true
            },
            {
              "type": "singleSelect",
              "label": "the required consent logic",
              "configKey": "resolutionStrategy",
              "options": [
                {
                  "label": "AND",
                  "value": "and"
                },
                {
                  "label": "OR",
                  "value": "or"
                }
              ],
              "required": true,
              "variant": "badge",
              "preRequisites": {
                "fields": [
                  {
                    "configKey": "provider",
                    "value": "custom"
                  }
                ]
              }
            },
            {
              "type": "tagInput",
              "label": "Enter consent category ID’s",
              "note": "Input your consent category IDs by pressing ‘Enter’ after each entry. The support for category names is deprecated. We recommend using the category IDs instead of the names as IDs are unique and less likely to change over time, making them a more reliable choice.",
              "configKey": "consents",
              "tagKey": "consent",
              "placeholder": "e.g: Marketing",
              "default": [
                {
                  "consent": ""
                }
              ]
            }
          ],
          "preRequisites": {
            "featureFlags": [
              {
                "configKey": "AMP_enable-gcm",
                "value": true
              }
            ]
          }
        }
      ]
    }
  }
}
