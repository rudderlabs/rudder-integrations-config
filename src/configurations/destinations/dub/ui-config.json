{
  "uiConfig": {
    "baseTemplate": [
      {
        "title": "Initial setup",
        "note": "Review how this destination is set up",
        "sections": [
          {
            "groups": [
              {
                "title": "Connection settings",
                "note": "Update your connection settings here",
                "icon": "settings",
                "fields": [
                  {
                    "type": "textInput",
                    "label": "API Key",
                    "note": "Enter your Dub API Key",
                    "configKey": "apiKey",
                    "regex": "^dub_[a-zA-Z0-9_]{8,100}$",
                    "regexErrorMessage": "Invalid API Key.",
                    "placeholder": "e.g: dub_123456789abcdef",
                    "secret": true,
                    "required": true
                  },
                  {
                    "type": "checkbox",
                    "label": "Convert amount to cents",
                    "note": "We will multiply the amount by 100 before sending it to Dub if this is set to true. By default, it is set to true.",
                    "configKey": "convertAmountToCents",
                    "default": true,
                    "required": true
                  }
                ]
              }
            ]
          },
          {
            "groups": [
              {
                "title": "Connection mode",
                "note": [
                  "Update how you want to route events from your source to destination. ",
                  {
                    "text": "Get help deciding",
                    "link": "https://www.rudderstack.com/docs/destinations/rudderstack-connection-modes/"
                  }
                ],
                "icon": "sliders",
                "fields": []
              }
            ]
          }
        ]
      },
      {
        "title": "Mappings",
        "note": "Set your mapping for destination",
        "hideEditIcon": true,
        "sections": [
          {
            "groups": [
              {
                "title": "RudderStack to Dub event mappings",
                "fields": [
                  {
                    "type": "redirect",
                    "redirectGroupKey": "dubEventMapping",
                    "label": "Event mappings"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "title": "Configuration settings",
        "note": "Manage the settings for your destination",
        "sections": [
          {
            "id": "consentSettings",
            "title": "Consent settings",
            "note": "Configure consent settings for each provider here",
            "icon": "settings",
            "groups": []
          }
        ]
      }
    ],
    "redirectGroups": {
      "dubEventMapping": {
        "fields": [
          {
            "type": "mapping",
            "label": "Mapping of RudderStack events to Dub events",
            "note": "Important: Only events with a clickId and configured in this mapping will be successfully delivered to Dub. Events without a clickId or not mapped here will fail, potentially creating noise in your destination events tab.",
            "configKey": "eventMapping",
            "default": [],
            "columns": [
              {
                "type": "textInput",
                "regex": "^[^{}]{1,100}$",
                "configKey": "from",
                "regexErrorMessage": "Invalid Event Name",
                "label": "Event Name",
                "placeholder": "e.g: Custom Purchase Event"
              },
              {
                "type": "singleSelect",
                "configKey": "to",
                "label": "Dub Event",
                "options": [
                  {
                    "name": "Lead Conversion Event",
                    "value": "LEAD_CONVERSION"
                  },
                  {
                    "name": "Sales Conversion Event",
                    "value": "SALES_CONVERSION"
                  }
                ]
              }
            ]
          }
        ]
      }
    },
    "sdkTemplate": {
      "title": "SDK settings",
      "note": "not visible in the ui",
      "fields": []
    },
    "consentSettingsTemplate": {
      "title": "Consent settings",
      "note": "not visible in the ui",
      "fields": [
        {
          "type": "dynamicCustomForm",
          "configKey": "consentManagement",
          "default": [],
          "rowFields": [
            {
              "type": "singleSelect",
              "label": "Consent management provider",
              "configKey": "provider",
              "options": [
                {
                  "label": "Custom",
                  "value": "custom"
                },
                {
                  "label": "iubenda",
                  "value": "iubenda"
                },
                {
                  "label": "Ketch",
                  "value": "ketch"
                },
                {
                  "label": "OneTrust",
                  "value": "oneTrust"
                }
              ],
              "default": "oneTrust",
              "required": true
            },
            {
              "type": "singleSelect",
              "label": "the required consent logic",
              "configKey": "resolutionStrategy",
              "options": [
                {
                  "label": "AND",
                  "value": "and"
                },
                {
                  "label": "OR",
                  "value": "or"
                }
              ],
              "required": true,
              "variant": "badge",
              "preRequisites": {
                "fields": [
                  {
                    "configKey": "provider",
                    "value": "custom"
                  }
                ]
              }
            },
            {
              "type": "tagInput",
              "label": "Enter consent category IDs",
              "note": "Input your consent category IDs by pressing 'Enter' after each entry. We recommend using IDs instead of names as IDs are unique and less likely to change over time, making them a more reliable choice.",
              "configKey": "consents",
              "tagKey": "consent",
              "placeholder": "e.g: Marketing",
              "default": [
                {
                  "consent": ""
                }
              ]
            }
          ]
        }
      ]
    }
  }
}
